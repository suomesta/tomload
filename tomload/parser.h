/*
 * @file tomload/parser.h
 * @note target version of C++ is C++14. 
 */

#ifndef TOMLOAD_PARSER_H
#define TOMLOAD_PARSER_H

#include "tomload/tomload.h"
#include "tomload/view_t.h"

namespace tomload {

bool wait_newline(view_t& view);
/////////////////////////////////////////////////////////////////////////////

void skip_space(view_t& view, view_t spaces, bool skip_comment);
/////////////////////////////////////////////////////////////////////////////

item_t parse_array(view_t& view);
/////////////////////////////////////////////////////////////////////////////

void insert_key_value(std::map<key_t, item_t>* p, std::vector<key_t> keys, item_t value);
/////////////////////////////////////////////////////////////////////////////

item_t parse_inline_table(view_t& view);
/////////////////////////////////////////////////////////////////////////////

item_t parse_item(view_t& view);
/////////////////////////////////////////////////////////////////////////////

std::vector<key_t> parse_keys(view_t& view);
/////////////////////////////////////////////////////////////////////////////

void check_duplex_keys(const std::vector<key_t>& keys, const std::vector<std::vector<key_t>>& brackets_set);
/////////////////////////////////////////////////////////////////////////////

}  // namespace tomload

#endif  // TOMLOAD_PARSER_H
